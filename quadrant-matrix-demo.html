<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROI Quadrant Matrix Demo - Chart.js</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9fafb;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #1f2937;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .chart-container {
            position: relative;
            height: 500px;
            margin: 30px 0;
        }
        
        .legend {
            background: #f3f4f6;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .legend h3 {
            margin-top: 0;
            color: #374151;
        }
        
        .legend-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }
        
        .quadrant-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
        }
        
        .quadrant-color {
            width: 20px;
            height: 15px;
            margin-right: 10px;
            border: 1px solid #d1d5db;
            border-radius: 3px;
        }
        
        .demo-controls {
            text-align: center;
            margin: 20px 0;
        }
        
        .demo-btn {
            background: #8b5cf6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 0 10px;
            font-size: 14px;
        }
        
        .demo-btn:hover {
            background: #7c3aed;
        }
        
        .info-box {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .info-box h4 {
            margin-top: 0;
            color: #1e40af;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¯ Task Complexity vs Action Maturity<br>ROI Quadrant Matrix</h1>
        
        <div class="info-box">
            <h4>ðŸš€ Interactive Demo</h4>
            <p>This Chart.js implementation shows a 4-quadrant ROI matrix with:</p>
            <ul>
                <li><strong>Background Quadrants:</strong> Colored regions indicating ROI potential</li>
                <li><strong>Custom Plugin:</strong> Renders backgrounds before scatter points</li>
                <li><strong>Dynamic Points:</strong> Purple circles (radius 8px) that can be added dynamically</li>
                <li><strong>Clear Labels:</strong> Quadrant descriptions with readable backgrounds</li>
            </ul>
        </div>

        <div class="chart-container">
            <canvas id="quadrantChart"></canvas>
        </div>

        <div class="demo-controls">
            <button class="demo-btn" onclick="addSamplePoint()">Add Sample Task</button>
            <button class="demo-btn" onclick="clearChart()">Clear All Points</button>
            <button class="demo-btn" onclick="addMultiplePoints()">Add Multiple Tasks</button>
        </div>

        <div class="legend">
            <h3>ROI Quadrant Matrix Guide</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top: 15px;">
                <div>
                    <p><strong>Chart Axes:</strong></p>
                    <p>â€¢ <strong>X-axis:</strong> Action Maturity Score (1-5) â†’</p>
                    <p>â€¢ <strong>Y-axis:</strong> Task Complexity Score (1-5) â†‘</p>
                    <p>â€¢ <strong>Data Points:</strong> Purple circles (radius 8px)</p>
                </div>
                <div>
                    <p><strong>Score Scale:</strong></p>
                    <div style="margin-top: 8px;">
                        <p><strong>1</strong> = Very Low</p>
                        <p><strong>2</strong> = Low</p>
                        <p><strong>3</strong> = Medium</p>
                        <p><strong>4</strong> = High</p>
                        <p><strong>5</strong> = Very High</p>
                    </div>
                </div>
                <div>
                    <p><strong>ROI Quadrants:</strong></p>
                    <div class="quadrant-item">
                        <div class="quadrant-color" style="background: rgba(239, 68, 68, 0.1);"></div>
                        <span><strong>Top-Left:</strong> Potential for Negative ROI</span>
                    </div>
                    <div class="quadrant-item">
                        <div class="quadrant-color" style="background: rgba(34, 197, 94, 0.15);"></div>
                        <span><strong>Top-Right:</strong> High ROI if Feasible</span>
                    </div>
                    <div class="quadrant-item">
                        <div class="quadrant-color" style="background: rgba(251, 191, 36, 0.1);"></div>
                        <span><strong>Bottom-Left:</strong> Limited ROI</span>
                    </div>
                    <div class="quadrant-item">
                        <div class="quadrant-color" style="background: rgba(20, 184, 166, 0.1);"></div>
                        <span><strong>Bottom-Right:</strong> ROI if Scalable</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // =============================================================================
        // CUSTOM CHART.JS PLUGIN FOR ROI QUADRANTS
        // =============================================================================

        /**
         * Custom Chart.js plugin to draw ROI quadrant backgrounds and labels
         * This plugin renders colored quadrants before the scatter points are drawn
         */
        const roiQuadrantPlugin = {
            id: 'roiQuadrantPlugin',
            beforeDatasetsDraw: function(chart) {
                const { ctx, chartArea: { left, top, right, bottom }, scales: { x, y } } = chart;
                
                // Save the current context state
                ctx.save();
                
                // Define quadrant boundaries (split at 3.0 for both axes)
                const xMid = x.getPixelForValue(3.0);
                const yMid = y.getPixelForValue(3.0);
                
                // Define quadrant colors with transparency
                const quadrantColors = {
                    topLeft: 'rgba(239, 68, 68, 0.1)',     // Light red - Potential for Negative ROI
                    topRight: 'rgba(34, 197, 94, 0.15)',   // Light green - High ROI if Feasible
                    bottomLeft: 'rgba(251, 191, 36, 0.1)', // Light yellow - Limited ROI
                    bottomRight: 'rgba(20, 184, 166, 0.1)' // Light teal - ROI if Scalable
                };
                
                // Draw quadrant backgrounds
                // Top-left quadrant (High Complexity, Low Maturity)
                ctx.fillStyle = quadrantColors.topLeft;
                ctx.fillRect(left, top, xMid - left, yMid - top);
                
                // Top-right quadrant (High Complexity, High Maturity)
                ctx.fillStyle = quadrantColors.topRight;
                ctx.fillRect(xMid, top, right - xMid, yMid - top);
                
                // Bottom-left quadrant (Low Complexity, Low Maturity)
                ctx.fillStyle = quadrantColors.bottomLeft;
                ctx.fillRect(left, yMid, xMid - left, bottom - yMid);
                
                // Bottom-right quadrant (Low Complexity, High Maturity)
                ctx.fillStyle = quadrantColors.bottomRight;
                ctx.fillRect(xMid, yMid, right - xMid, bottom - yMid);
                
                // Add quadrant labels
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                
                // Calculate label positions (center of each quadrant)
                const labelPositions = {
                    topLeft: { x: left + (xMid - left) / 2, y: top + (yMid - top) / 2 },
                    topRight: { x: xMid + (right - xMid) / 2, y: top + (yMid - top) / 2 },
                    bottomLeft: { x: left + (xMid - left) / 2, y: yMid + (bottom - yMid) / 2 },
                    bottomRight: { x: xMid + (right - xMid) / 2, y: yMid + (bottom - yMid) / 2 }
                };
                
                // Draw quadrant labels with background
                const labels = {
                    topLeft: 'Potential for\nNegative ROI',
                    topRight: 'High ROI\nif Feasible',
                    bottomLeft: 'Limited ROI',
                    bottomRight: 'ROI if\nScalable'
                };
                
                Object.keys(labels).forEach(quadrant => {
                    const pos = labelPositions[quadrant];
                    const lines = labels[quadrant].split('\n');
                    
                    // Semi-transparent white background for readability
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                    const textHeight = lines.length * 16;
                    const textWidth = Math.max(...lines.map(line => ctx.measureText(line).width)) + 12;
                    ctx.fillRect(pos.x - textWidth/2, pos.y - textHeight/2, textWidth, textHeight);
                    
                    // Draw text lines
                    ctx.fillStyle = 'rgba(55, 65, 81, 0.8)'; // Gray-700 with transparency
                    lines.forEach((line, index) => {
                        const lineY = pos.y - (lines.length - 1) * 8 + index * 16;
                        ctx.fillText(line, pos.x, lineY);
                    });
                });
                
                // Draw quadrant divider lines
                ctx.strokeStyle = 'rgba(156, 163, 175, 0.5)'; // Gray-400 with transparency
                ctx.lineWidth = 1;
                ctx.setLineDash([5, 5]); // Dashed lines
                
                // Vertical divider line
                ctx.beginPath();
                ctx.moveTo(xMid, top);
                ctx.lineTo(xMid, bottom);
                ctx.stroke();
                
                // Horizontal divider line
                ctx.beginPath();
                ctx.moveTo(left, yMid);
                ctx.lineTo(right, yMid);
                ctx.stroke();
                
                // Reset line dash
                ctx.setLineDash([]);
                
                // Restore the context state
                ctx.restore();
            }
        };

        // =============================================================================
        // CHART INITIALIZATION AND DEMO FUNCTIONS
        // =============================================================================

        let chart;
        let sampleTasks = [
            { name: "Email Automation", maturity: 4, complexity: 2 },
            { name: "Data Analysis", maturity: 3, complexity: 4 },
            { name: "Customer Support", maturity: 2, complexity: 3 },
            { name: "Report Generation", maturity: 5, complexity: 1 },
            { name: "Content Creation", maturity: 1, complexity: 5 }
        ];
        let taskIndex = 0;

        /**
         * Initialize the quadrant matrix chart
         */
        function initializeChart() {
            const ctx = document.getElementById('quadrantChart').getContext('2d');
            
            // Register the custom quadrant plugin
            Chart.register(roiQuadrantPlugin);
            
            chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Tasks',
                        data: [],
                        backgroundColor: 'rgba(147, 51, 234, 0.8)',      // Purple color
                        borderColor: 'rgba(147, 51, 234, 1)',           // Solid purple border
                        pointRadius: 8,                                  // Fixed radius as requested
                        pointHoverRadius: 11
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            min: 0.5,
                            max: 5.5,
                            title: {
                                display: true,
                                text: 'Action Maturity Score â†’',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                stepSize: 1,
                                callback: function(value) {
                                    const labels = ['', 'Very Low', 'Low', 'Medium', 'High', 'Very High'];
                                    return labels[value] || value;
                                }
                            },
                            grid: {
                                display: true,
                                color: 'rgba(156, 163, 175, 0.3)'
                            }
                        },
                        y: {
                            min: 0.5,
                            max: 5.5,
                            title: {
                                display: true,
                                text: 'â†‘ Task Complexity Score',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                stepSize: 1,
                                callback: function(value) {
                                    const labels = ['', 'Very Low', 'Low', 'Medium', 'High', 'Very High'];
                                    return labels[value] || value;
                                }
                            },
                            grid: {
                                display: true,
                                color: 'rgba(156, 163, 175, 0.3)'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const task = sampleTasks.find(t => 
                                        t.maturity === context.parsed.x && t.complexity === context.parsed.y
                                    );
                                    const taskName = task ? task.name : `Task ${context.dataIndex + 1}`;
                                    // Sample ROI values for demo purposes
                                    const sampleROI = Math.round((context.parsed.x * 200) - (context.parsed.y * 50) + Math.random() * 100);
                                    const sampleTimeSavings = Math.round(context.parsed.x * context.parsed.y * 20 + Math.random() * 100);
                                    const sampleCostSavings = Math.round(sampleTimeSavings * 25 + Math.random() * 5000);
                                    
                                    return [
                                        `Time Savings: ${sampleTimeSavings} hours/year`,
                                        `Cost Savings: $${sampleCostSavings.toLocaleString()}`,
                                        `ROI: ${sampleROI}%`
                                    ];
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        /**
         * Get quadrant name based on coordinates
         */
        function getQuadrantName(x, y) {
            if (y >= 3 && x < 3) return "Potential for Negative ROI";
            if (y >= 3 && x >= 3) return "High ROI if Feasible";
            if (y < 3 && x < 3) return "Limited ROI";
            if (y < 3 && x >= 3) return "ROI if Scalable";
            return "Unknown";
        }

        /**
         * Add a single sample point to the chart
         * This demonstrates how new points can be added dynamically
         */
        function addSamplePoint() {
            if (taskIndex >= sampleTasks.length) {
                alert('All sample tasks have been added! Use "Clear All Points" to reset.');
                return;
            }

            const task = sampleTasks[taskIndex];
            
            // Add data point
            chart.data.datasets[0].data.push({
                x: task.maturity,
                y: task.complexity
            });
            
            // Update chart
            chart.update('none'); // No animation for better performance
            
            taskIndex++;
        }

        /**
         * Clear all points from the chart
         */
        function clearChart() {
            chart.data.datasets[0].data = [];
            chart.update('none');
            taskIndex = 0;
        }

        /**
         * Add multiple sample points at once
         */
        function addMultiplePoints() {
            clearChart();
            
            // Add all sample tasks
            sampleTasks.forEach(task => {
                chart.data.datasets[0].data.push({
                    x: task.maturity,
                    y: task.complexity
                });
            });
            
            chart.update('none');
            taskIndex = sampleTasks.length;
        }

        // Initialize the chart when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeChart();
            
            // Add some initial sample points
            setTimeout(() => {
                addMultiplePoints();
            }, 500);
        });
    </script>
</body>
</html>